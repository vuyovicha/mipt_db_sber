# Multi-model СУБД

### История развития
Multi-model СУБД начали появляться в начале 2010-х годов. Это был некий ответ на необходимость обработки совершенно различных типов данных (структурированных и неструктурированных) в рамках единой системы. Одним из первых и наиболее известных примеров Multi-model СУБД стала ArangoDB (2012 год).

### Инструменты для взаимодействия с СУБД
1. ArangoDB Web Interface - встроенный веб-интерфейс для управления и мониторинга базы данных ArangoDB.
2. DBeaver - универсальный инструмент для работы с различными типами баз данных, включая multi-model СУБД.
3. NoSQLBooster - мощный GUI для работы с MongoDB, включая поддержку multi-model функционала.
И многие другие клиентские приложения и драйверы для языков программирования (Python, Java, JavaScript).

### Какой database engine используется в Multi-model СУБД?
Multi-model СУБД используют различные типы database engine в зависимости от поддерживаемых моделей данных. К примеру, в ArangoDB используется свой собственный database engine под названием ArangoDB Storage Engine. В других multi-model СУБД, таких как OrientDB или MarkLogic, также используются специализированные database engine для работы с различными типами данных.

### Как устроен язык запросов в Multi-model СУБД? 
Язык запросов в Multi-model СУБД обычно поддерживает различные типы запросов, соответствующие разным моделям данных (графовые запросы, запросы к документам и запросы к key-value данным). Обычно в Multi-model СУБД используется SQL-подобный язык запросов, который может быть расширен или адаптирован для работы с различными моделями данных. Давайте рассмотрим пример Multi-model СУБД, такой как ArangoDB, и выполним ряд запросов к данным разных моделей:

1. Создадим коллекцию для хранения информации о друзьях:
`CREATE COLLECTION friends`
2. Добавим несколько записей в коллекцию:
`INSERT INTO friends VALUES { "name": "Alex", "age": 20 }`
`INSERT INTO friends VALUES { "name": "Rudolf", "age": 19 }`
`INSERT INTO friends VALUES { "name": "Masha", "age": 18 }`
3. Создадим граф для хранения связей между друзьями:
`CREATE GRAPH connections`
4. Добавим вершины в граф:
`INSERT INTO connections.vertices("friends") VALUES { "_key": "Alex" }`
`INSERT INTO connections.vertices("friends") VALUES { "_key": "Rudolf" }`
`INSERT INTO connections.vertices("friends") VALUES { "_key": "Masha" }`
5. Добавим пару рёбер:
`INSERT  INTO connections.edges("knows")  VALUES { "_from": "friends/Alex",  "_to": "friends/Rudolf" }`
`INSERT  INTO connections.edges("knows")  VALUES { "_from": "friends/Alex",  "_to": "friends/Masha" }`
6. Теперь, например, выполним запрос, который найдёт всех людей, которых знает Alex:
`FOR vertex IN  1..1 OUTBOUND 'users/Alex' GRAPH 'connections' RETURN vertex`

### Распределение файлов БД по разным носителям
Multi-model СУБД может предоставлять возможность управления различными хранилищами данных (например, блочным уровнем, файловой системой, распределенными хранилищами) для оптимального хранения и доступа к данным разных моделей.

### На каком языке/ах программирования написана СУБД?
Multi-model СУБД были написаны на различных языках программирования, в зависимости от конкретной реализации. Например, ArangoDB написан на C++ и JavaScript.

### Какие типы индексов поддерживаются в БД? 
Multi-model БД поддерживают различные типы индексов (например, B-Tree, Hash, Full-Text). 
Пример создания индекса в ArangoDB:
`db.collection.ensureIndex({field: "some_field"})`

### Как строится процесс выполнения запросов в Multi-model СУБД?
Рассмотрим на примере ArangoBD. В ней процесс основан на механизме AQL (ArangoDB Query Language) и включает следующие шаги:
1. **Анализ запроса**: Когда запрос поступает к серверу ArangoDB, система анализирует его структуру и определяет тип операции.
2. **Оптимизация запроса**: После анализа запроса система оптимизирует его для повышения производительности. Это может включать в себя выбор индексов, оптимизацию плана выполнения запроса и другие оптимизации.
3. **Планирование выполнения запроса**: ArangoDB создает план выполнения запроса, который определяет порядок операций и способы доступа к данным.
4. **Исполнение запроса**: Система выполняет запрос в соответствии с планом выполнения, обращаясь к данным на диске или в памяти, выполняя необходимые операции (к примеру, фильтрацию, сортировку, объединение) и возвращая результаты.
5. **Кэширование результатов**: При необходимости ArangoDB может кэшировать результаты выполнения запросов для ускорения последующих запросов.
6. **Отправка результатов**: После выполнения запроса система отправляет результаты назад к сделавшему запрос

### Есть ли для Multi-model СУБД понятие «план запросов»? 
Да, для multi-model СУБД существует понятие "план запросов". План запросов представляет собой структуру данных, которая определяет порядок выполнения операций для обработки запроса и получения требуемых результатов. Этот этап играет важную роль в оптимизации выполнения запросов и повышении производительности системы. Процесс работы этапа "план запросов" в нашей СУБД состоит из следующих этапов: анализ, оптимизация, создание плана выполнения и оценка его стоимости, само выполнение. Этап создания "плана запросов" играет ключевую роль в оптимизации выполнения запросов в multi-model СУБД, так как позволяет выбирать наиболее эффективные способы доступа к данным и выполнения операций для каждой модели данных, что в конечном итоге повышает производительность системы.

### Поддерживаются ли транзакции в Multi-model СУБД? 
Да, многие мульти-модельные СУБД, включая ArangoDB, поддерживают транзакции. В ArangoDB транзакции могут использоваться для обеспечения атомарности, согласованности, изолированности и долговечности данных (ACID-свойств). Это означает, что изменения данных в рамках транзакции либо применяются полностью, либо откатываются, чтобы гарантировать целостность данных. Вот пример использования транзакций в ArangoDB:
```
db._executeTransaction({
	collections:  {
		read:  ["collection1"],
		write:  ["collection2"]
	},
	action: function() {
		var doc = db.collection1.document("doc1");
		doc.property = "updated";
		db.collection2.save(doc);
	}
});
```
В данном примере выполняется транзакция, которая читает данные из коллекции collection1, изменяет их и сохраняет в коллекцию collection2. Если какая-либо операция в рамках транзакции завершится неудачно, все изменения будут отменены.

### Какие методы восстановления поддерживаются в Multi-model СУБД?
1. **Резервное копирование и восстановление**: создание регулярных резервных копий данных, которые могут быть использованы для восстановления данных в случае их потери или повреждения.
2. **Точки восстановления**: позволяют восстанавливать данные до определенного момента времени, что полезно при восстановлении отдельных транзакций или при исправлении ошибок, которые произошли после последнего резервного копирования.
3. **Репликация**: позволяет создавать копии данных на других узлах или серверах для обеспечения отказоустойчивости и повышения производительности. 
4. **Журналирование**: позволяет фиксировать все изменения данных, произошедшие в системе, что обеспечивает возможность восстановления данных до любого момента времени.
5. **Механизмы восстановления после сбоев**: обеспечивают автоматическое переключение на резервные узлы или сервера в случае сбоя основного узла для минимизации простоев и потерь данных.

### Шардинг в Multi-model СУБД
Существует несколько типов шардинга, которые могут использоваться в мульти-модельных СУБД:
1. **Горизонтальный**: данные разделяются по строкам или объектам на основе какого-либо критерия, например, по значению определенного поля. Каждый шард содержит только часть данных, что позволяет распределить нагрузку и увеличить параллелизм запросов.
2. **Вертикальный**: данные разделяются по столбцам или атрибутам, таким образом, что каждый шард содержит только определенные атрибуты или типы данных. Этот подход позволяет уменьшить размер каждого шарда и улучшить производительность при выполнении запросов.

Принцип работы шардинга в мульти-модельных СУБД заключается в следующем:
1. Данные разделяются на шарды в соответствии с выбранным методом.
2. Шарды распределяются по разным узлам или серверам в системе.
3. Запросы к данным могут быть направлены к любому из шардов в зависимости от ключа шардинга или других критериев.
4. Результаты запросов из разных шардов объединяются и возвращаются пользователю.

Шардинг в мульти-модельных СУБД позволяет обеспечить масштабируемость системы, повысить производительность и улучшить отказоустойчивость за счет распределения данных по разным узлам. 

### Возможно ли применить термины Data Mining, Data Warehousing и OLAP в Multi-model СУБД?
Да, термины Data Mining, Data Warehousing и OLAP могут быть применены в контексте мульти-модельных СУБД. 
1. **Data Mining**: процесс обнаружения интересных и полезных закономерностей, шаблонов и знаний из больших объемов данных. В multi-model СУБД можно использовать алгоритмы Data Mining для анализа различных типов данных, хранящихся в различных моделях, и выявления скрытых связей и паттернов между ними.
2. **Data Warehousing**: процесс сбора, хранения и управления данными из различных источников для последующего анализа и отчетности. multi-model СУБД могут использоваться как хранилище данных для хранения разнородных данных из различных моделей и предоставления доступа к этим данным для аналитики.
3. **OLAP (Online Analytical Processing)**: технология аналитической обработки данных, которая позволяет анализировать данные в многомерной модели. Мульти-модельные СУБД могут поддерживать OLAP-функционал для анализа данных из различных моделей, позволяя проводить сложный анализ данных и получать ценные закономерности и инсайты.

### Какие методы защиты поддерживаются Multi-model СУБД? 
Мульти-модельные СУБД обычно поддерживают различные методы защиты данных, включая шифрование трафика, модели авторизации, аутентификации. Опишем некоторые из них:
1. **Модели авторизации и аутентификации**: в нашей СУБД обеспечена поддержка различных моделей авторизации и аутентификации, таких как RBAC (Role-Based Access Control), ABAC (Attribute-Based Access Control). Эти модели позволяют управлять доступом пользователей к данным на основе их ролей, атрибутов или других параметров.
2. **Защита от SQL-инъекций**: наша СУБД может предоставлять механизмы защиты от SQL-инъекций, такие как параметризованные запросы или использование хранимых процедур. Это помогает предотвратить злоумышленникам выполнение вредоносного SQL-кода через внедрение вредоносных запросов.

### Какие сообщества развивают Multi-model СУБД? 
1. **ArangoDB**: ArangoDB - это открытая мульти-модельная СУБД, которая разрабатывается и поддерживается компанией ArangoDB GmbH. В сообществе ArangoDB также активно участвуют разработчики и пользователи, предлагая свои идеи и внося свой вклад в развитие проекта.
2. **Couchbase**: Couchbase Server - это распределенная мульти-модельная СУБД, разрабатываемая компанией Couchbase. 
3. **MarkLogic**: MarkLogic - это мульти-модельная NoSQL СУБД, разрабатываемая компанией MarkLogic Corporation. 

### Демонстрации работы СУБД
Демобаза из открытых источников: https://github.com/arangodb/example-datasets

Вот так может выглядеть запрос для одной из баз из источника:
```
db.airports.near(50,6).distance().limit(5).toArray()
db.airports.near(50,6).distance().limit(5).toArray().map(function(d) { return { name: d.name, distance: d.distance } })
```

### Как продолжить самостоятельное изучение языка запросов с помощью демобазы?
1. **Ознакомьтесь с документацией**: Первым шагом будет изучение официальной документации по AQL. В документации вы найдете подробное описание всех операторов, функций и возможностей языка запросов.
2. **Практика на демобазе**: Используйте созданную демобазу для практики написания различных типов запросов. 
3. **Изучение примеров**: Изучите различные примеры запросов на AQL из документации и других источников. Попробуйте адаптировать их для вашей демобазы и понять их.
4. **Форумы и сообщества**: Если у вас возникнут вопросы или затруднения, обратитесь к форумам или сообществам пользователей ArangoDB. 

### Где найти документацию и пройти обучение?
1. **Официальная документация ArangoDB**: https://www.arangodb.com/
2. **ArangoDB University**: https://www.arangodb.com/arangodb-university/
3. **Видеоуроки и блоги**: Поиск видеоуроков и статей в блогах о использовании ArangoDB может быть полезным для понимания концепций и практического применения мульти-модельной СУБД.
4. **Форумы и сообщества**: Присоединитесь к форумам и сообществам пользователей ArangoDB, где вы сможете задавать вопросы, обсуждать проблемы и получать советы от опытных пользователей и разработчиков.

### Как быть в курсе происходящего?
1. **Официальный блог ArangoDB**: https://www.arangodb.com/blog/
2. **Социальные сети**: https://twitter.com/arangodb
3. **Конференции и мероприятия**: Следите за конференциями и мероприятиями, посвященными базам данных и технологиям, где могут быть представлены новые разработки и тенденции в области мульти-модельных СУБД.

